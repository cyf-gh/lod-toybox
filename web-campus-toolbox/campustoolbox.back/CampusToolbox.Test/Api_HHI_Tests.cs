using CampusToolbox.Model.Back.Account;
using CampusToolbox.Model.Front.Utils.HappyHandingIn;
using CampusToolbox.Model.Security;
using CampusToolbox.Test;
using Newtonsoft.Json;
using System.Net;
using System.Threading.Tasks;
using Xunit;

namespace CampusToolbox.Tests.Api {
    public class HHI {

        [Fact]
        public async Task Commit_Images() {
            // 重新登陆，获取新的token

            string[] img = {
                "data:image/jpeg;base64,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",
                "data:image/jpeg;base64,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"
            };

            var response = await TestHelper.TestPost(
                $"/api/utils/hhi/upload/images",
                new HHIFrontUploadImageModel {
                    Images = new System.Collections.Generic.List<string>( img ),
                    TaskId = 0
                } );
            Assert.Equal( HttpStatusCode.OK, response.StatusCode );
        }
    }
}
